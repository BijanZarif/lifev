#! /bin/bash
#
# author: Davide baroli <davide.baroli@gmail.com>
# date:   13-12-2012
#

ver='2012.1'

download_qhull() {
  wget -c "http://www.qhull.org/download/qhull-${ver}-src.tgz" || return 1
}

unpack_qhull() { 
  tar xzf qhull-${ver}-src.tgz || return 1
}

build_qhull() {  
  pushd ${src_dir}/qhull-${ver}
    config/bootstrap.sh --prefix=${install_dir} \
      --parallel=${NUM_PROC} || return 1
  popd

  if [[ "${CARCH}" == "x86_64" ]]; then
    EXTRAOPTS="-DCMAKE_CXX_FLAGS=-fPIC -DCMAKE_C_FLAGS=-fPIC"
  fi
    
  rm -f CMakeCache.txt
  rm -rf CMakeFiles

  ${cmake_bin}/cmake \
    -DCMAKE_INSTALL_PREFIX=${install_dir} \
    $EXTRAOPTS  \
    \
    ${src_dir}/qhull-$ver || return 1
  
  make -j$NUM_PROC || return 1
}

install_qhull() {
  make -j$NUM_PROC install || return 1
}







