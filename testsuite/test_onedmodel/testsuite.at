# -*- mode: m4 -*-
#
#  This file is part of the LifeV library
#
#  Author(s): Christophe Prud'homme <christophe.prudhomme@epfl.ch>
#       Date: 2004-08-29
#
#  Copyright (C) 2004 EPFL, INRIA and Politechnico di Milano
#
#  This library is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License, or (at your option) any later version.
#
#  This library is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
#  Lesser General Public License for more details.
#
#  You should have received a copy of the GNU Lesser General Public
#  License along with this library; if not, write to the Free Software
#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
#
# \file testsuite.at
# \author Christophe Prud'homme <christophe.prudhomme@epfl.ch>
# \date 2004-08-29
# 
AT_SETUP([test_onedmodel (1 tube)])
AT_KEYWORDS([oned onedmodel onetube])
AT_DATA([keystrokes],[[

]])

AT_DATA([data],[[# -*- getpot -*- (GetPot mode activation for emacs)
#-------------------------------------------------
#   Data file for One D Model (Non Linear)
#-------------------------------------------------

[boundcond]
[./left]
name	= W1imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 2
[../right]
name	= W2imposed

[parameters]
alphaCor	= 1.0		# coriolis coeff
beta1	= 0.5		# pressure law exponent
Kr	= 1.0		# friction parameter (source term)

[time]
timebeg	 = 0.0		# inittime
timeend	 = 0.1		# endtime
timestep = 1e-4		# timestep

[1d_physics]
young	= 4.e6

[discretization]
mesh_file	= 	# mesh file name
mesh_dir	= ../data/mesh/inria
		# the directory where the mesh file is
x_left	= 0.
x_right	= 60.
nb_elem	= 60	#   number of elements

[miscellaneous]
post_dir = ./                    # the directory for postprocessing files
post_file = sol                  # the file name
verbose = 5
show_graceplot = 0                # 0: no grace plot, 1: show grace plots

]])
AT_CHECK([$top_builddir/testsuite/test_onedmodel/test_onedmodel < keystrokes],[0],[ignore],[ignore])
AT_CLEANUP



AT_SETUP([test_onedmodel (2 tubes)])
AT_KEYWORDS([oned onedmodel twotubes])
AT_DATA([keystrokes],[[

]])

AT_DATA([datanl],[[# -*- getpot -*- (GetPot mode activation for emacs)
#-------------------------------------------------
#   Data file for One D Model (Non Linear)
#-------------------------------------------------

[boundcond]
test_case	= 999	# test case for boundary conditions

[parameters]
alphaCor	= 3.0		# coriolis coeff
beta0	= 4.0		# pressure law factor
beta1	= 5.5		# pressure law exponent
Kr	= 6.0		# friction parameter (source term)

[time]
timebeg	 = 0.0		# inittime
timeend	 = 0.3		# endtime
timestep = 1e-4		# timestep

[discretization]
mesh_file	= 	# mesh file name
mesh_dir	= ../data/mesh/inria
		# the directory where the mesh file is
x_left	= 0.
x_right	= 30.
nb_elem	= 30	#   number of elements

[miscellaneous]
post_dir = ./                 # the directory for postprocessing files
post_file = soltube1               # the file name
verbose = 5
show_graceplot = 0                # 0: no grace plot, 1: show grace plots
]])

AT_DATA([datanl2],[[# -*- getpot -*- (GetPot mode activation for emacs)
#-------------------------------------------------
#   Data file for One D Model (Non Linear)
#-------------------------------------------------

[boundcond]
test_case	= 9999	# test case for boundary conditions

[parameters]
alphaCor	= 3.0		# coriolis coeff
beta0	= 4.0		# pressure law factor
beta1	= 5.5		# pressure law exponent
Kr	= 6.0		# friction parameter (source term)

[time]
timebeg	 = 0.0		# inittime
timeend	 = 0.3		# endtime
timestep = 1e-4		# timestep

[discretization]
mesh_file	= 	# mesh file name
mesh_dir	= ../data/mesh/inria
		# the directory where the mesh file is
x_left	= 30.
x_right	= 60.
nb_elem	= 30	#   number of elements

[miscellaneous]
post_dir = ./                 # the directory for postprocessing files
post_file = soltube2               # the file name
verbose = 5
show_graceplot = 0                # 0: no grace plot, 1: show grace plots
]])
AT_CHECK([$top_builddir/testsuite/test_onedmodel/test_twotubes < keystrokes],[0],[ignore],[ignore])
AT_CLEANUP



AT_SETUP([test_onednet])
AT_KEYWORDS([test_onednet onednet])
AT_DATA([datanet],[[
# -*- getpot -*- (GetPot mode activation for emacs)
#-------------------------------------------------
#   Data file for One D Model (Non Linear)
#-------------------------------------------------

[1dnetwork]
num_vessels = 6
num_interfaces = 7
timebeg	 = 0.0
timeend	 = 0.02
timestep = 1e-5
postprocess_timestep = 0.01
setparam = 1

[./interfacemap]

##############
# first tube #
##############

[1dnetwork/tube1]
left_interface = 1
right_interface = 2

[./boundcond/left]
name	= W1imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 2
[../right]
name	= internal_node

[1dnetwork/tube1/1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol1
verbose = 100
show_graceplot = 0


##############
# second tube #
##############

[1dnetwork/tube2]
left_interface = 2
right_interface = 3

[./boundcond/left]
name	= internal_node
[../right]
name	= W2imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 0

[../../1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol2
verbose = 100
show_graceplot = 0


##############
# third tube #
##############

[1dnetwork/tube3]
left_interface = 4
right_interface = 2

[./boundcond/left]
name	= W1imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 2
[../right]
name	= internal_node

[../../1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol3
verbose = 100
show_graceplot = 0


##############
# fourth tube #
##############

[1dnetwork/tube4]
left_interface = 2
right_interface = 5

[./boundcond/left]
name	= internal_node
[../right]
name	= W2imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 0

[../../1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol4
verbose = 100
show_graceplot = 0


##############
# fifth tube #
##############

[1dnetwork/tube5]
left_interface = 6
right_interface = 2

[./boundcond/left]
name	= W1imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 2
[../right]
name	= internal_node

[../../1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol5
verbose = 100
show_graceplot = 0


##############
# sixth tube #
##############

[1dnetwork/tube6]
left_interface = 2
right_interface = 7

[./boundcond/left]
name	= internal_node
[../right]
name	= W2imposed
# bc function types
WimposeTypeA = 1
WimposeTypeQ = 0

[../../1d_physics]
young	= 1.e4
thickness = 0.05
radius	= 0.5
density = 1.
viscosity = 0.035
ksi = 0.5

[../discretization]
x_left	= 0.
x_right	= 10.
nb_elem	= 100

[../miscellaneous]
post_dir = ./
post_file = sol6
verbose = 100
show_graceplot = 0
# -*- getpot -*- (GetPot mode activation for emacs)
#-------------------------------------------------
#   Data file for One D Model (Non Linear)
#-------------------------------------------------

[boundcond]
test_case	= 4	# test case for boundary conditions

[parameters]
alphaCor	= 3.0		# coriolis coeff
beta0	= 4.0		# pressure law factor
beta1	= 5.5		# pressure law exponent
Kr	= 6.0		# friction parameter (source term)

[time]
timebeg	 = 0.0		# inittime
timeend	 = 0.3		# endtime
timestep = 1e-4		# timestep

[discretization]
mesh_file	= 	# mesh file name
mesh_dir	= ./
		# the directory where the mesh file is
x_left	= 0.
x_right	= 60.
nb_elem	= 60	#   number of elements

[miscellaneous]
post_dir = ./                    # the directory for postprocessing files
post_file = sol                    # the directory for postprocessing files
verbose = 5
show_graceplot = 0                # 0: no grace plot, 1: show grace plots

]])
AT_CHECK([$top_builddir/testsuite/test_onedmodel_tiz/test_onednet],[0],[ignore],[ignore])
AT_CLEANUP([*.m *.mtv])
